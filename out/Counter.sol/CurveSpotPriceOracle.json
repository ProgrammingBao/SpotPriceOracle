{"abi":[{"type":"function","name":"getSpotPrice","inputs":[{"name":"pool","type":"address","internalType":"address"},{"name":"tokenIndex","type":"int128","internalType":"int128"},{"name":"quoteTokenIndex","type":"int128","internalType":"int128"},{"name":"amountIn","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"price","type":"uint256","internalType":"uint256"}],"stateMutability":"view"}],"bytecode":{"object":"0x608060405234801561001057600080fd5b506101a1806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80633f3f79f214610030575b600080fd5b61004361003e3660046100f9565b610055565b60405190815260200160405180910390f35b604051635e0d443f60e01b8152600f84810b600483015283900b602482015260448101829052600090859082906001600160a01b03831690635e0d443f90606401602060405180830381865afa1580156100b3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906100d79190610152565b979650505050505050565b8035600f81900b81146100f457600080fd5b919050565b6000806000806080858703121561010f57600080fd5b84356001600160a01b038116811461012657600080fd5b9350610134602086016100e2565b9250610142604086016100e2565b9396929550929360600135925050565b60006020828403121561016457600080fd5b505191905056fea26469706673582212204fa8287143d1639a54fd32104351bc2a0d3092a3e5cebbf7cd095d2401dbbbfd64736f6c63430008170033","sourceMap":"795:432:20:-:0;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561001057600080fd5b506004361061002b5760003560e01c80633f3f79f214610030575b600080fd5b61004361003e3660046100f9565b610055565b60405190815260200160405180910390f35b604051635e0d443f60e01b8152600f84810b600483015283900b602482015260448101829052600090859082906001600160a01b03831690635e0d443f90606401602060405180830381865afa1580156100b3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906100d79190610152565b979650505050505050565b8035600f81900b81146100f457600080fd5b919050565b6000806000806080858703121561010f57600080fd5b84356001600160a01b038116811461012657600080fd5b9350610134602086016100e2565b9250610142604086016100e2565b9396929550929360600135925050565b60006020828403121561016457600080fd5b505191905056fea26469706673582212204fa8287143d1639a54fd32104351bc2a0d3092a3e5cebbf7cd095d2401dbbbfd64736f6c63430008170033","sourceMap":"795:432:20:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;831:394;;;;;;:::i;:::-;;:::i;:::-;;;:25:22;;;819:2;804:18;831:394:20;;;;;;;;1137:55;;-1:-1:-1;;;1137:55:20;;1094:2:22;1083:22;;;1137:55:20;;;1065:41:22;1142:22;;;1122:18;;;1115:50;1181:18;;;1174:34;;;989:13:20;;1060:4;;989:13;;-1:-1:-1;;;;;1137:16:20;;;;;1038:18:22;;1137:55:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1117:75;831:394;-1:-1:-1;;;;;;;831:394:20:o;14:162:22:-;81:20;;141:2;130:21;;;120:32;;110:60;;166:1;163;156:12;110:60;14:162;;;:::o;181:499::-;265:6;273;281;289;342:3;330:9;321:7;317:23;313:33;310:53;;;359:1;356;349:12;310:53;385:23;;-1:-1:-1;;;;;437:31:22;;427:42;;417:70;;483:1;480;473:12;417:70;506:5;-1:-1:-1;530:37:22;563:2;548:18;;530:37;:::i;:::-;520:47;;586:37;619:2;608:9;604:18;586:37;:::i;:::-;181:499;;;;-1:-1:-1;576:47:22;;670:2;655:18;642:32;;-1:-1:-1;;181:499:22:o;1219:184::-;1289:6;1342:2;1330:9;1321:7;1317:23;1313:32;1310:52;;;1358:1;1355;1348:12;1310:52;-1:-1:-1;1381:16:22;;1219:184;-1:-1:-1;1219:184:22:o","linkReferences":{}},"methodIdentifiers":{"getSpotPrice(address,int128,int128,uint256)":"3f3f79f2"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"pool\",\"type\":\"address\"},{\"internalType\":\"int128\",\"name\":\"tokenIndex\",\"type\":\"int128\"},{\"internalType\":\"int128\",\"name\":\"quoteTokenIndex\",\"type\":\"int128\"},{\"internalType\":\"uint256\",\"name\":\"amountIn\",\"type\":\"uint256\"}],\"name\":\"getSpotPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/Counter.sol\":\"CurveSpotPriceOracle\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/Counter.sol\":{\"keccak256\":\"0x269cae532bad8e44727f77735744a7c7f42a4e4425dfad8d374a569800c933a7\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://47c9fdfeb9714f9ee9258f7f13425e83dd52796fe8393a569af87c87b0f167a4\",\"dweb:/ipfs/QmeRCuF9oMYS2B86BmVtnDs4wmTGhbcsvnqD5qZNytCMXe\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"pool","type":"address"},{"internalType":"int128","name":"tokenIndex","type":"int128"},{"internalType":"int128","name":"quoteTokenIndex","type":"int128"},{"internalType":"uint256","name":"amountIn","type":"uint256"}],"stateMutability":"view","type":"function","name":"getSpotPrice","outputs":[{"internalType":"uint256","name":"price","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/Counter.sol":"CurveSpotPriceOracle"},"libraries":{}},"sources":{"src/Counter.sol":{"keccak256":"0x269cae532bad8e44727f77735744a7c7f42a4e4425dfad8d374a569800c933a7","urls":["bzz-raw://47c9fdfeb9714f9ee9258f7f13425e83dd52796fe8393a569af87c87b0f167a4","dweb:/ipfs/QmeRCuF9oMYS2B86BmVtnDs4wmTGhbcsvnqD5qZNytCMXe"],"license":"UNLICENSED"}},"version":1},"ast":{"absolutePath":"src/Counter.sol","id":44621,"exportedSymbols":{"CurveSpotPriceOracle":[44620],"ICurveStableSwap":[44587],"ISpotPriceOracle":[44575]},"nodeType":"SourceUnit","src":"39:1189:20","nodes":[{"id":44561,"nodeType":"PragmaDirective","src":"39:24:20","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":44575,"nodeType":"ContractDefinition","src":"159:517:20","nodes":[{"id":44574,"nodeType":"FunctionDefinition","src":"540:134:20","nodes":[],"documentation":{"id":44563,"nodeType":"StructuredDocumentation","src":"192:343:20","text":" @notice Retrieve the spot price for a token in a specified quote currency utilizing a specific liquidity pool\n @param token The token to get the spot price of\n @param pool The liquidity pool to use for the price retrieval\n @param quoteToken Quote token\n @return price The spot price of the token     "},"functionSelector":"75075ad5","implemented":false,"kind":"function","modifiers":[],"name":"getSpotPrice","nameLocation":"549:12:20","parameters":{"id":44570,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44565,"mutability":"mutable","name":"token","nameLocation":"579:5:20","nodeType":"VariableDeclaration","scope":44574,"src":"571:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44564,"name":"address","nodeType":"ElementaryTypeName","src":"571:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44567,"mutability":"mutable","name":"pool","nameLocation":"602:4:20","nodeType":"VariableDeclaration","scope":44574,"src":"594:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44566,"name":"address","nodeType":"ElementaryTypeName","src":"594:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44569,"mutability":"mutable","name":"quoteToken","nameLocation":"624:10:20","nodeType":"VariableDeclaration","scope":44574,"src":"616:18:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44568,"name":"address","nodeType":"ElementaryTypeName","src":"616:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"561:79:20"},"returnParameters":{"id":44573,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44572,"mutability":"mutable","name":"price","nameLocation":"667:5:20","nodeType":"VariableDeclaration","scope":44574,"src":"659:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44571,"name":"uint256","nodeType":"ElementaryTypeName","src":"659:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"658:15:20"},"scope":44575,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"ISpotPriceOracle","contractDependencies":[],"contractKind":"interface","documentation":{"id":44562,"nodeType":"StructuredDocumentation","src":"66:93:20","text":"@notice An oracle that can provide spot prices for tokens using specific liquidity pools"},"fullyImplemented":false,"linearizedBaseContracts":[44575],"name":"ISpotPriceOracle","nameLocation":"169:16:20","scope":44621,"usedErrors":[],"usedEvents":[]},{"id":44587,"nodeType":"ContractDefinition","src":"677:115:20","nodes":[{"id":44586,"nodeType":"FunctionDefinition","src":"710:80:20","nodes":[],"functionSelector":"5e0d443f","implemented":false,"kind":"function","modifiers":[],"name":"get_dy","nameLocation":"719:6:20","parameters":{"id":44582,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44577,"mutability":"mutable","name":"i","nameLocation":"733:1:20","nodeType":"VariableDeclaration","scope":44586,"src":"726:8:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44576,"name":"int128","nodeType":"ElementaryTypeName","src":"726:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44579,"mutability":"mutable","name":"j","nameLocation":"743:1:20","nodeType":"VariableDeclaration","scope":44586,"src":"736:8:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44578,"name":"int128","nodeType":"ElementaryTypeName","src":"736:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44581,"mutability":"mutable","name":"dx","nameLocation":"754:2:20","nodeType":"VariableDeclaration","scope":44586,"src":"746:10:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44580,"name":"uint256","nodeType":"ElementaryTypeName","src":"746:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"725:32:20"},"returnParameters":{"id":44585,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44584,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44586,"src":"781:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44583,"name":"uint256","nodeType":"ElementaryTypeName","src":"781:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"780:9:20"},"scope":44587,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"ICurveStableSwap","contractDependencies":[],"contractKind":"interface","fullyImplemented":false,"linearizedBaseContracts":[44587],"name":"ICurveStableSwap","nameLocation":"687:16:20","scope":44621,"usedErrors":[],"usedEvents":[]},{"id":44620,"nodeType":"ContractDefinition","src":"795:432:20","nodes":[{"id":44619,"nodeType":"FunctionDefinition","src":"831:394:20","nodes":[],"body":{"id":44618,"nodeType":"Block","src":"1004:221:20","nodes":[],"statements":[{"assignments":[44602],"declarations":[{"constant":false,"id":44602,"mutability":"mutable","name":"curvePool","nameLocation":"1031:9:20","nodeType":"VariableDeclaration","scope":44618,"src":"1014:26:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_ICurveStableSwap_$44587","typeString":"contract ICurveStableSwap"},"typeName":{"id":44601,"nodeType":"UserDefinedTypeName","pathNode":{"id":44600,"name":"ICurveStableSwap","nameLocations":["1014:16:20"],"nodeType":"IdentifierPath","referencedDeclaration":44587,"src":"1014:16:20"},"referencedDeclaration":44587,"src":"1014:16:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurveStableSwap_$44587","typeString":"contract ICurveStableSwap"}},"visibility":"internal"}],"id":44606,"initialValue":{"arguments":[{"id":44604,"name":"pool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44589,"src":"1060:4:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44603,"name":"ICurveStableSwap","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44587,"src":"1043:16:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ICurveStableSwap_$44587_$","typeString":"type(contract ICurveStableSwap)"}},"id":44605,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1043:22:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ICurveStableSwap_$44587","typeString":"contract ICurveStableSwap"}},"nodeType":"VariableDeclarationStatement","src":"1014:51:20"},{"assignments":[44608],"declarations":[{"constant":false,"id":44608,"mutability":"mutable","name":"amountOut","nameLocation":"1125:9:20","nodeType":"VariableDeclaration","scope":44618,"src":"1117:17:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44607,"name":"uint256","nodeType":"ElementaryTypeName","src":"1117:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":44615,"initialValue":{"arguments":[{"id":44611,"name":"tokenIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44591,"src":"1154:10:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},{"id":44612,"name":"quoteTokenIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44593,"src":"1166:15:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},{"id":44613,"name":"amountIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44595,"src":"1183:8:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int128","typeString":"int128"},{"typeIdentifier":"t_int128","typeString":"int128"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":44609,"name":"curvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44602,"src":"1137:9:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurveStableSwap_$44587","typeString":"contract ICurveStableSwap"}},"id":44610,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1147:6:20","memberName":"get_dy","nodeType":"MemberAccess","referencedDeclaration":44586,"src":"1137:16:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_int128_$_t_int128_$_t_uint256_$returns$_t_uint256_$","typeString":"function (int128,int128,uint256) view external returns (uint256)"}},"id":44614,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1137:55:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"1117:75:20"},{"expression":{"id":44616,"name":"amountOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44608,"src":"1209:9:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":44599,"id":44617,"nodeType":"Return","src":"1202:16:20"}]},"functionSelector":"3f3f79f2","implemented":true,"kind":"function","modifiers":[],"name":"getSpotPrice","nameLocation":"840:12:20","parameters":{"id":44596,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44589,"mutability":"mutable","name":"pool","nameLocation":"870:4:20","nodeType":"VariableDeclaration","scope":44619,"src":"862:12:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44588,"name":"address","nodeType":"ElementaryTypeName","src":"862:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44591,"mutability":"mutable","name":"tokenIndex","nameLocation":"891:10:20","nodeType":"VariableDeclaration","scope":44619,"src":"884:17:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44590,"name":"int128","nodeType":"ElementaryTypeName","src":"884:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44593,"mutability":"mutable","name":"quoteTokenIndex","nameLocation":"918:15:20","nodeType":"VariableDeclaration","scope":44619,"src":"911:22:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44592,"name":"int128","nodeType":"ElementaryTypeName","src":"911:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44595,"mutability":"mutable","name":"amountIn","nameLocation":"951:8:20","nodeType":"VariableDeclaration","scope":44619,"src":"943:16:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44594,"name":"uint256","nodeType":"ElementaryTypeName","src":"943:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"852:113:20"},"returnParameters":{"id":44599,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44598,"mutability":"mutable","name":"price","nameLocation":"997:5:20","nodeType":"VariableDeclaration","scope":44619,"src":"989:13:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44597,"name":"uint256","nodeType":"ElementaryTypeName","src":"989:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"988:15:20"},"scope":44620,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"CurveSpotPriceOracle","contractDependencies":[],"contractKind":"contract","fullyImplemented":true,"linearizedBaseContracts":[44620],"name":"CurveSpotPriceOracle","nameLocation":"804:20:20","scope":44621,"usedErrors":[],"usedEvents":[]}],"license":"UNLICENSED"},"id":20}