{"abi":[{"type":"function","name":"coins","inputs":[{"name":"idx","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"get_dy","inputs":[{"name":"i","type":"int128","internalType":"int128"},{"name":"j","type":"int128","internalType":"int128"},{"name":"dx","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"coins(uint256)":"c6610657","get_dy(int128,int128,uint256)":"5e0d443f"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"idx\",\"type\":\"uint256\"}],\"name\":\"coins\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"int128\",\"name\":\"i\",\"type\":\"int128\"},{\"internalType\":\"int128\",\"name\":\"j\",\"type\":\"int128\"},{\"internalType\":\"uint256\",\"name\":\"dx\",\"type\":\"uint256\"}],\"name\":\"get_dy\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/spotprices.sol\":\"ICurvePool\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/spotprices.sol\":{\"keccak256\":\"0xed83e263a55f7d78a5373c8437a80484bf6afabd3f6f517ab47e9df63a6d134a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://de5781f2bb50e4626c2cdfc0740efef501ca14eb7b56abfa089e49a74c4f44c9\",\"dweb:/ipfs/QmS3t3D3e64wDXqzznN5xtsk3hNS4cM78zLWNkHKBHXyhp\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"idx","type":"uint256"}],"stateMutability":"view","type":"function","name":"coins","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"int128","name":"i","type":"int128"},{"internalType":"int128","name":"j","type":"int128"},{"internalType":"uint256","name":"dx","type":"uint256"}],"stateMutability":"view","type":"function","name":"get_dy","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/spotprices.sol":"ICurvePool"},"libraries":{}},"sources":{"src/spotprices.sol":{"keccak256":"0xed83e263a55f7d78a5373c8437a80484bf6afabd3f6f517ab47e9df63a6d134a","urls":["bzz-raw://de5781f2bb50e4626c2cdfc0740efef501ca14eb7b56abfa089e49a74c4f44c9","dweb:/ipfs/QmS3t3D3e64wDXqzznN5xtsk3hNS4cM78zLWNkHKBHXyhp"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"src/spotprices.sol","id":44632,"exportedSymbols":{"CurveSpotPrice":[44631],"ICurvePool":[44580]},"nodeType":"SourceUnit","src":"32:1029:20","nodes":[{"id":44561,"nodeType":"PragmaDirective","src":"32:24:20","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":44580,"nodeType":"ContractDefinition","src":"58:174:20","nodes":[{"id":44572,"nodeType":"FunctionDefinition","src":"85:80:20","nodes":[],"functionSelector":"5e0d443f","implemented":false,"kind":"function","modifiers":[],"name":"get_dy","nameLocation":"94:6:20","parameters":{"id":44568,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44563,"mutability":"mutable","name":"i","nameLocation":"108:1:20","nodeType":"VariableDeclaration","scope":44572,"src":"101:8:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44562,"name":"int128","nodeType":"ElementaryTypeName","src":"101:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44565,"mutability":"mutable","name":"j","nameLocation":"118:1:20","nodeType":"VariableDeclaration","scope":44572,"src":"111:8:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44564,"name":"int128","nodeType":"ElementaryTypeName","src":"111:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44567,"mutability":"mutable","name":"dx","nameLocation":"129:2:20","nodeType":"VariableDeclaration","scope":44572,"src":"121:10:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44566,"name":"uint256","nodeType":"ElementaryTypeName","src":"121:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"100:32:20"},"returnParameters":{"id":44571,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44570,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44572,"src":"156:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44569,"name":"uint256","nodeType":"ElementaryTypeName","src":"156:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"155:9:20"},"scope":44580,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":44579,"nodeType":"FunctionDefinition","src":"170:60:20","nodes":[],"functionSelector":"c6610657","implemented":false,"kind":"function","modifiers":[],"name":"coins","nameLocation":"179:5:20","parameters":{"id":44575,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44574,"mutability":"mutable","name":"idx","nameLocation":"193:3:20","nodeType":"VariableDeclaration","scope":44579,"src":"185:11:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44573,"name":"uint256","nodeType":"ElementaryTypeName","src":"185:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"184:13:20"},"returnParameters":{"id":44578,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44577,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44579,"src":"221:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44576,"name":"address","nodeType":"ElementaryTypeName","src":"221:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"220:9:20"},"scope":44580,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"ICurvePool","contractDependencies":[],"contractKind":"interface","fullyImplemented":false,"linearizedBaseContracts":[44580],"name":"ICurvePool","nameLocation":"68:10:20","scope":44632,"usedErrors":[],"usedEvents":[]},{"id":44631,"nodeType":"ContractDefinition","src":"234:826:20","nodes":[{"id":44608,"nodeType":"FunctionDefinition","src":"461:259:20","nodes":[],"body":{"id":44607,"nodeType":"Block","src":"596:124:20","nodes":[],"statements":[{"assignments":[44595],"declarations":[{"constant":false,"id":44595,"mutability":"mutable","name":"pool","nameLocation":"617:4:20","nodeType":"VariableDeclaration","scope":44607,"src":"606:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"},"typeName":{"id":44594,"nodeType":"UserDefinedTypeName","pathNode":{"id":44593,"name":"ICurvePool","nameLocations":["606:10:20"],"nodeType":"IdentifierPath","referencedDeclaration":44580,"src":"606:10:20"},"referencedDeclaration":44580,"src":"606:10:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"}},"visibility":"internal"}],"id":44599,"initialValue":{"arguments":[{"id":44597,"name":"poolAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44582,"src":"635:11:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44596,"name":"ICurvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44580,"src":"624:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ICurvePool_$44580_$","typeString":"type(contract ICurvePool)"}},"id":44598,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"624:23:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"}},"nodeType":"VariableDeclarationStatement","src":"606:41:20"},{"expression":{"arguments":[{"id":44602,"name":"tokenIndexFrom","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44584,"src":"676:14:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},{"id":44603,"name":"tokenIndexTo","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44586,"src":"692:12:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},{"id":44604,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44588,"src":"706:6:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int128","typeString":"int128"},{"typeIdentifier":"t_int128","typeString":"int128"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":44600,"name":"pool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44595,"src":"664:4:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"}},"id":44601,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"669:6:20","memberName":"get_dy","nodeType":"MemberAccess","referencedDeclaration":44572,"src":"664:11:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_int128_$_t_int128_$_t_uint256_$returns$_t_uint256_$","typeString":"function (int128,int128,uint256) view external returns (uint256)"}},"id":44605,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"664:49:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":44592,"id":44606,"nodeType":"Return","src":"657:56:20"}]},"functionSelector":"3f3f79f2","implemented":true,"kind":"function","modifiers":[],"name":"getSpotPrice","nameLocation":"470:12:20","parameters":{"id":44589,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44582,"mutability":"mutable","name":"poolAddress","nameLocation":"491:11:20","nodeType":"VariableDeclaration","scope":44608,"src":"483:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44581,"name":"address","nodeType":"ElementaryTypeName","src":"483:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44584,"mutability":"mutable","name":"tokenIndexFrom","nameLocation":"511:14:20","nodeType":"VariableDeclaration","scope":44608,"src":"504:21:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44583,"name":"int128","nodeType":"ElementaryTypeName","src":"504:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44586,"mutability":"mutable","name":"tokenIndexTo","nameLocation":"534:12:20","nodeType":"VariableDeclaration","scope":44608,"src":"527:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"},"typeName":{"id":44585,"name":"int128","nodeType":"ElementaryTypeName","src":"527:6:20","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"visibility":"internal"},{"constant":false,"id":44588,"mutability":"mutable","name":"amount","nameLocation":"556:6:20","nodeType":"VariableDeclaration","scope":44608,"src":"548:14:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44587,"name":"uint256","nodeType":"ElementaryTypeName","src":"548:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"482:81:20"},"returnParameters":{"id":44592,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44591,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44608,"src":"587:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44590,"name":"uint256","nodeType":"ElementaryTypeName","src":"587:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"586:9:20"},"scope":44631,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":44630,"nodeType":"FunctionDefinition","src":"877:181:20","nodes":[],"body":{"id":44629,"nodeType":"Block","src":"968:90:20","nodes":[],"statements":[{"assignments":[44619],"declarations":[{"constant":false,"id":44619,"mutability":"mutable","name":"pool","nameLocation":"989:4:20","nodeType":"VariableDeclaration","scope":44629,"src":"978:15:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"},"typeName":{"id":44618,"nodeType":"UserDefinedTypeName","pathNode":{"id":44617,"name":"ICurvePool","nameLocations":["978:10:20"],"nodeType":"IdentifierPath","referencedDeclaration":44580,"src":"978:10:20"},"referencedDeclaration":44580,"src":"978:10:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"}},"visibility":"internal"}],"id":44623,"initialValue":{"arguments":[{"id":44621,"name":"poolAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44610,"src":"1007:11:20","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44620,"name":"ICurvePool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44580,"src":"996:10:20","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ICurvePool_$44580_$","typeString":"type(contract ICurvePool)"}},"id":44622,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"996:23:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"}},"nodeType":"VariableDeclarationStatement","src":"978:41:20"},{"expression":{"arguments":[{"id":44626,"name":"idx","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44612,"src":"1047:3:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":44624,"name":"pool","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44619,"src":"1036:4:20","typeDescriptions":{"typeIdentifier":"t_contract$_ICurvePool_$44580","typeString":"contract ICurvePool"}},"id":44625,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1041:5:20","memberName":"coins","nodeType":"MemberAccess","referencedDeclaration":44579,"src":"1036:10:20","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":44627,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1036:15:20","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":44616,"id":44628,"nodeType":"Return","src":"1029:22:20"}]},"functionSelector":"1471e9e1","implemented":true,"kind":"function","modifiers":[],"name":"getTokenAddress","nameLocation":"886:15:20","parameters":{"id":44613,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44610,"mutability":"mutable","name":"poolAddress","nameLocation":"910:11:20","nodeType":"VariableDeclaration","scope":44630,"src":"902:19:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44609,"name":"address","nodeType":"ElementaryTypeName","src":"902:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":44612,"mutability":"mutable","name":"idx","nameLocation":"931:3:20","nodeType":"VariableDeclaration","scope":44630,"src":"923:11:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":44611,"name":"uint256","nodeType":"ElementaryTypeName","src":"923:7:20","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"901:34:20"},"returnParameters":{"id":44616,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44615,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44630,"src":"959:7:20","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44614,"name":"address","nodeType":"ElementaryTypeName","src":"959:7:20","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"958:9:20"},"scope":44631,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"CurveSpotPrice","contractDependencies":[],"contractKind":"contract","fullyImplemented":true,"linearizedBaseContracts":[44631],"name":"CurveSpotPrice","nameLocation":"243:14:20","scope":44632,"usedErrors":[],"usedEvents":[]}],"license":"MIT"},"id":20}